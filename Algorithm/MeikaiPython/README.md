# 新・明解Pythonで学ぶアルゴリズムとデータ構造

## Chapter 1
### 決定木
パターン網羅の証明方法として少数の組み合わせの場合は**決定木**を活用できる
- 決定木の例: `a, b, c`の大小関係
``` plantuml
@startmindmap
* a >= b
** a > b 
*** b >= c
**** b > c
*****[#lightgreen] a > b > c
*****[#lightgreen] a > c = b

**** a >= c
***** a > c
******[#lightgreen] a > c >b
******[#lightgreen] a = c > b

*****[#lightgreen] c > a > b

*** b >= c
**** b > c
*****[#lightgreen] a = b > c
*****[#lightgreen] a = b = c

****[#lightgreen] c > a = b

** a >= c
*** a > c
****[#lightgreen] b > a > c
****[#lightgreen] b > a = c

*** b >= c
**** b > c
*****[#lightgreen] b > c > a
*****[#lightgreen] b = c > a

****[#lightgreen] c > b > a
@endmindmap
```

### アルゴリズムの処理負荷低減の考え方
1. ループ分の中で判定を行う場合は外に出せないか検討する。  
-> アルゴリズムの世界では柔軟性より高速化が重要
2. 入力受付や処理ごとに変化しない要素については最初から除外してアルゴリズムを考える。

## Chapter3
### 探索とキー
探索するキーの指定方法は大きく3つのパターンが有る
- キーと一致することを指定する。: 国籍が日本である人を探す。
- キーの区間で指定する。: 年齢が21歳以上27歳未満の人を探す。
- キーの近接として指定する。: ある語句と最も発音が似ている名前の人を探す。

### 配列からの探索方法
- 線形探索:ランダムに並んだデータの集まりからの探索を行う。
    - 番兵法:データの末尾に探索するデータを入れておくことでデータの外に出たという`条件判定`を削除して実行時間を短縮する
- 2分探索:一定の規則で並んだデータの集まりからの高速な探索を行う。
- ハッシュ法:追加や削除が高速に行えるデータの集まりからの高速な探索を行う。
    - チェイン法:同一ハッシュ値のデータを線形リストでつなぐ手法。
    - オープンアドレス法:衝突時に再ハッシュを行う手法。

### アルゴリズムの選択基準
探索だけなのか、追加・削除も頻繁に行うのかなど総合的に検討してアルゴリズムを選択する。  
選択基準の一例
- 目的
- 実行速度
- 対象となるデータ構造

### ハッシュ法
探索だけでなく追加・削除も効率良く行う方法  

-`ハッシュ値`を使ってデータにアクセスする。  
-キー => ハッシュ値に変換する方法を`ハッシュ関数`
-`衝突`が発生した場合は、`チェイン法`, `オープンアドレス法`で対応する。
    - チェイン法: 同一のハッシュ値をもつ要素を線形リストで管理する。
    - オープンアドレス法: 空きバケットをつくけるまでハッシュを繰り返す
- ハッシュテーブルの大きさは`素数`が良いとされている。
     - ハッシュ値を余剰で算出する場合に平均的に分布されることが期待できるため
- ハッシュ値の作り方は[チェイン法の実装コード](./Chapter3/src/chapter3_4.py)を参照。

#### ハッシュ値の例
- 13で割った剰余  

| キー                       | 5   | 6   | 14  | 29  | 34  | 37  | 51  | 69  | 75  |
|:--------------------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| ハッシュ値(13で割った剰余) | 5   | 6   | 1   | 3   | 8   | 11  | 12  | 4   | 10  |

- ハッシュ表（ハッシュ値をキーにした表）に変換

| ハッシュ値 | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  |
|:----------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| バケット   |     | 14  |     | 29  | 69  | 5   | 6   |     | 34  |     | 75  | 37  | 51  |

- 35を追加する場合(35 % 13 = 9)

| ハッシュ値 | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9                                   | 10  | 11  | 12  |
|:----------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:-----------------------------------:|:---:|:---:|:---:|
| バケット   |     | 14  |     | 29  | 69  | 5   | 6   |     | 34  | <span style=color:red>**35**</span> | 75  | 37  | 51  |

配列のように要素の移動をしなくても要素の追加を実施することができる。

- 18を追加する場合（18 % 13 = 5）

| ハッシュ値 | 0   | 1   | 2   | 3   | 4   | 5                                   | 6   | 7   | 8   | 9   | 10  | 11  | 12  |
|:----------:|:---:|:---:|:---:|:---:|:---:|:-----------------------------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| バケット   |     | 14  |     | 29  | 69  | 5                                   | 6   |     | 34  | 35  | 75  | 37  | 51  |
| 追加要素   |     |     |     |     |     | <span style=color:red>**18**</span> |     |     |     |     |     |     |     |

すでに`ハッシュ値:5のバケット`は埋まっている

- 衝突時の対応方法

    - チェイン法

    | ハッシュ値 | 0    | 1   | 2    | 3   | 4   | 5                                   | 6   | 7   | 8   | 9   | 10  | 11  | 12  |
    |:----------:|:----:|:---:|:----:|:---:|:---:|:-----------------------------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
    | バケット   | None | 14  | None | 29  | 69  | 5                                   | 6   |     | 34  | 35  | 75  | 37  | 51  |
    | 衝突       |      |     |      |     |     | <span style=color:red>**18**</span> |     |     |     |     |     |     |     |

        空のバケットは`None`、値を入れる場合は`線形リスト`で値を格納する。
    
    - オープンアドレス法(クローズドハッシュ法, 線形探査法)

    | ハッシュ値 | 0    | 1   | 2    | 3   | 4   | 5   | 6                                   | 7   | 8   | 9   | 10  | 11  | 12  |
    |:----------:|:----:|:---:|:----:|:---:|:---:|:---:|:-----------------------------------:|:---:|:---:|:---:|:---:|:---:|:---:|
    | バケット   | None | 14  | None | 29  | 69  | 5   | 6                                   |     | 34  | 35  | 75  | 37  | 51  |
    | 衝突       |      |     |      |     |     |     | <span style=color:red>**18**</span> |     |     |     |     |     |     |

        1. 再ハッシュ(18 + 1をして再度ハッシュ値の計算)を行う。衝突。

    | ハッシュ値 | 0    | 1   | 2    | 3   | 4   | 5   | 6   | 7                                   | 8   | 9   | 10  | 11  | 12  |
    |:----------:|:----:|:---:|:----:|:---:|:---:|:---:|:---:|:-----------------------------------:|:---:|:---:|:---:|:---:|:---:|
    | バケット   | None | 14  | None | 29  | 69  | 5   | 6   | <span style=color:red>**18**</span> | 34  | 35  | 75  | 37  | 51  |

        2. 再ハッシュ(18 + 1 + 1をして再度ハッシュ値の計算)を行う。格納成功。

    | ハッシュ値 | 0    | 1   | 2    | 3   | 4   | 5                                  | 6   | 7   | 8   | 9   | 10  | 11  | 12  |
    |:----------:|:----:|:---:|:----:|:---:|:---:|:----------------------------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
    | バケット   | None | 14  | None | 29  | 69  | <span style=color:red>~~5~~</span> | 6   | 18  | 34  | 35  | 75  | 37  | 51  |

        3. `ハッシュ値5`の要素の削除。そのまま削除すると18が見つけられなくなる

    | ハッシュ値 | 0    | 1   | 2    | 3   | 4   | 5                                  | 6   | 7   | 8   | 9   | 10  | 11  | 12  |
    |:----------:|:----:|:---:|:----:|:---:|:---:|:----------------------------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
    | バケット   | None | 14  | None | 29  | 69  | <span style=color:red>**★**</span> | 6   | 18  | 34  | 35  | 75  | 37  | 51  |

        4. `ハッシュ値5`の要素に`空`だけど`元々データが入っていたことがわかる値`を格納する。  
        `18`を探すときは`5` => `6` => `7`っと探して`18`を見つけられる。

## Chapter5
### 再帰処理の種類
- 直接的な再帰:自身が自分と同じ関数を呼び出す。
- 間接的な再帰:自分が呼び出した関数が自分を呼び出す。
- 真に再帰的:一度の処理で2回以上の再帰処理を含む場合
``` plantuml
@startuml

class A {}
A -> A : 直接的な再帰

A --> B : 間接的な再帰
A <-- B

B -> B : 真に再帰的
B -> B
@enduml
```


## 書籍情報
- [Amazon](https://www.amazon.co.jp/%E6%96%B0%E3%83%BB%E6%98%8E%E8%A7%A3Python%E3%81%A7%E5%AD%A6%E3%81%B6%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%A8%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0-%E6%9F%B4%E7%94%B0-%E6%9C%9B%E6%B4%8B-ebook/dp/B0834JWWZG/ref=sr_1_3?adgrpid=77416719506&gclid=Cj0KCQiA_P6dBhD1ARIsAAGI7HA79R_2OQ8WQ0o9-dILqQ8235FRWC7JbTzHTfa7oG7J8EK2GlOSsD0aAgvEEALw_wcB&hvadid=611397546140&hvdev=c&hvlocphy=1009285&hvnetw=g&hvqmt=e&hvrand=8745269407030564082&hvtargid=kwd-846364573423&hydadcr=4077_13255612&jp-ad-ap=0&keywords=python%E3%81%A7%E5%AD%A6%E3%81%B6%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0&qid=1673581721&sr=8-3)
